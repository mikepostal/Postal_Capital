<!DOCTYPE html>
<html lang="en" xmlns:th="https://www.thymeleaf.com">

<head>

</head>
<body>
	<div id="main" class='layout-navbar'>
		<div id="main-content">

			<div class="page-heading">
				<div class="page-title mb-5">
					<div class="row">
						<div class="col-12 col-md-6 order-md-1 order-last">
							<h3>Market Insight</h3>
							<!-- <p class="text-subtitle text-muted">Navbar will appear in top of the page.</p> -->
						</div>
					</div>
				</div>
				<section class="section blnk-db ">

					<form th:action="@{/marketInsight/saveMarketInsight}" method="post"
						enctype="multipart/form-data" th:object="${marketInsight}">
						<div class="card shadow">
							<div class="card-body">
								<h2 class="text-center"
									th:text="${marketInsight != null? 'Edit Market Insight' : 'Add Market Insight'}"></h2>
							</div>
						</div>
						<div class="card shadow my-3">
							<div class="card-body">
								<div class="row">
									<div class="col-md-6">
										<input type="hidden" name="marketInsightID"
											th:if="${marketInsight != null}"
											th:value="${marketInsight.marketInsightID}">
										<div class="form-group ">
											<label for="marketInsightTitle">Market Insight Title</label>
											<input type="text" class="form-control"
												id="marketInsightTitle" name="marketInsightTitle"
												th:value="${marketInsight != null? marketInsight.marketInsightTitle : ''}"
												required>
										</div>
										<div class="form-group ">
											<label for="type">Type</label> <input type="text"
												class="form-control" id="type" name="marketInsightType"
												th:value="${marketInsight != null? marketInsight.marketInsightType : ''}"
												required>
										</div>


									</div>
									<div class="col-md-6">
										<div class="form-group ">
											<label for="marketInsightDate">Date</label> <input
												type="date" class="form-control" id="marketInsightDate"
												name="marketInsightDate"
												th:value="${marketInsight != null? marketInsight.marketInsightDate : ''}"
												required>
										</div>
										<div class="form-group ">
											<label for="level">Level</label> <input type="text"
												class="form-control" id="level" name="marketInsightLevel"
												th:value="${marketInsight != null? marketInsight.marketInsightLevel : ''}"
												required>
										</div>



									</div>
									<table class="table" id="inputTable">
										<tbody>
											<tr id="inputRowTemplate">
												<td>
													<div class="row">
														<div class="col-sm-6">
															<div class="form-group ">
																<label for="marketInsightDetail">Detail</label>
																<textarea class="form-control" rows="5" cols="500"
																	id="marketInsightDetail" name="marketInsightDetail"></textarea>
															</div>
														</div>
														<div class="col-sm-6">
															<div class="form-group ">
																<label for="marketInsightDate">Attach File</label> <input
																	type="file" class="form-control" id="files"
																	name="files" required="required">
															</div>
														</div>
													</div>
												</td>
												<td><button class="removeRowBtn btn" type="button"
														onclick="removeRow(this)">
														<i class="bi bi-x-circle-fill" style="font-size: 30px;"></i>
													</button></td>
											</tr>
										</tbody>
									</table>
									<div class="text-center">
										<button type="button" onclick="addRow()" class="btn">
											<i class="bi bi-plus-circle-fill" style="font-size: 40px;"
												title="Add"></i>
										</button>
									</div>
									<!-- <input type="hidden" id="rowCount" name="num" value="1"> -->
									<div class="form-group text-center mt-3">
										<button type="submit" class="btn btn-primary col-md-3">
											<i th:text="${marketInsight != null? 'Update' : 'Add'}"></i>
										</button>
										<a th:href="@{/marketInsight/allMarketInsight}"
											class="btn btn-danger col-md-3"> Cancel </a>
									</div>

								</div>
							</div>
						</div>
					</form>
				</section>

			</div>

			<footer>
				<div class="footer clearfix mb-0 text-muted c-ftr">
					<div class="float-start">
						<p>2021 &copy; Banners Hallmark</p>
					</div>
				</div>
			</footer>
		</div>
	</div>

	<script src="/Bannershallmark/resources/assets/js/main.js"></script>
	<script type="text/javascript">
		function addRow() {
			var table = document.getElementById("inputTable");
			var rowTemplate = document.getElementById("inputRowTemplate");
			var newRow = rowTemplate.cloneNode(true);
			newRow.removeAttribute("id");
			var table = document.getElementById("inputTable");
			table.appendChild(newRow);

		}

		function removeRow(button) {
			var row = button.parentNode.parentNode;
			var table = document.getElementById("inputTable");
			var numRows = table.rows.length;
			if (row.rowIndex !== 0) {
				row.parentNode.removeChild(row);
			}
		}

		/* function updateRowCount() {
			var table = document.getElementById("inputTable");
			var rows = table.querySelectorAll("tbody > tr");
			var count = rows.length;
			document.getElementById("rowCount").value = count;
		}

		document.addEventListener('DOMContentLoaded', function() {
			updateRowCount();
		}); */
	</script>

</body>

</html>